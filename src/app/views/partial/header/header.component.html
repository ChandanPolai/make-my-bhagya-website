<header [class]="
    'tw-fixed tw-top-0 tw-right-0 tw-h-[77px] tw-backdrop-blur-md tw-bg-gradient-to-r tw-from-indigo-950/95 tw-via-purple-900/95 tw-to-indigo-950/95 tw-border-b tw-border-amber-400/30 tw-shadow-lg tw-shadow-purple-900/20 tw-z-30 tw-transition-all tw-duration-300 ' +
    (isCollapsed ? 'tw-left-16' : 'tw-left-64')
  ">
  <!-- Gradient overlay -->
  <div
    class="tw-absolute tw-inset-0 tw-bg-gradient-to-r tw-from-transparent tw-via-amber-500/5 tw-to-transparent tw-pointer-events-none">
  </div>

  <div class="tw-relative tw-h-full tw-px-6 tw-flex tw-items-center tw-justify-between">
    <!-- Left Section -->
    <div class="tw-flex tw-items-center tw-space-x-6">
      <!-- Enhanced Toggle Sidebar Button -->
      <button (click)="toggleSidebar()"
        class="tw-group tw-p-2 tw-rounded-lg tw-transition-all tw-duration-300 tw-transform hover:tw-scale-110 hover:tw-bg-amber-500/20">
        <i
          class="ph ph-list tw-text-xl tw-text-amber-300 tw-transition-transform tw-duration-300 group-hover:tw-rotate-12 group-hover:tw-text-amber-200"></i>
      </button>
    </div>

    <!-- Right Section -->
    <div class="tw-flex tw-items-center tw-space-x-4">
      <!-- Enhanced Profile Dropdown -->
      <div class="tw-relative">
        <button (click)="toggleProfileDropdown($event)"
          class="tw-flex tw-items-center tw-space-x-3 tw-p-3 tw-rounded-2xl tw-bg-gradient-to-br tw-from-amber-400/20 tw-via-yellow-400/10 tw-to-amber-500/20 hover:tw-from-amber-400/30 hover:tw-via-yellow-400/20 hover:tw-to-amber-500/30 tw-transition-all tw-duration-300 tw-shadow-lg hover:tw-shadow-xl tw-border tw-border-amber-400/30 tw-group tw-backdrop-blur-sm">
          <div class="tw-relative">
            <div
              class="tw-w-12 tw-h-12 tw-bg-gradient-to-br tw-from-amber-400 tw-to-yellow-500 tw-rounded-2xl tw-flex tw-items-center tw-justify-center tw-shadow-lg tw-ring-2 tw-ring-amber-300/50 tw-ring-opacity-50 group-hover:tw-ring-opacity-100 tw-transition-all tw-duration-300 tw-transform group-hover:tw-scale-105">
              <img [src]="
                  admin.profilePic
                    ? getImageUrl(admin.profilePic || '')
                    : 'https://ui-avatars.com/api/?name=' +
                      admin.name +
                      '&background=F59E0B&color=1E1B4B&bold=true'
                " [alt]="admin.name"
                class="tw-h-12 tw-w-12 tw-rounded-2xl tw-object-cover tw-border-2 tw-border-amber-200 tw-shadow-sm" />
            </div>
            <!-- Online status indicator -->
            <div
              class="tw-absolute -tw-bottom-0.5 -tw-right-0.5 tw-w-4 tw-h-4 tw-bg-gradient-to-r tw-from-green-400 tw-to-green-500 tw-rounded-full tw-border-2 tw-border-indigo-950 tw-shadow-sm tw-animate-pulse">
            </div>
          </div>

          <div class="tw-hidden md:tw-block tw-text-left">
            <span class="tw-text-sm tw-font-bold tw-text-amber-100 tw-block tw-leading-tight" *ngIf="admin">{{ admin.name
              | titlecase}}</span>
            <span
              class="tw-text-xs tw-font-semibold tw-bg-gradient-to-r tw-from-amber-300 tw-to-yellow-200 tw-bg-clip-text tw-text-transparent">Administrator</span>
          </div>

          <div class="tw-flex tw-flex-col tw-items-center tw-space-y-1">
            <i
              class="ph-caret-down tw-text-xs tw-text-amber-300 tw-transition-transform tw-duration-300 group-hover:tw-rotate-180 group-hover:tw-scale-110"></i>
            <div class="tw-w-1 tw-h-1 tw-bg-amber-300/50 tw-rounded-full tw-opacity-50"></div>
          </div>
        </button>

        <!-- Enhanced Profile Dropdown Menu -->
        <div *ngIf="showProfileDropdown"
          class="tw-absolute tw-right-0 tw-mt-3 tw-w-72 tw-bg-gradient-to-br tw-from-indigo-950 tw-via-purple-900 tw-to-indigo-950 tw-rounded-3xl tw-shadow-2xl tw-border-2 tw-border-amber-400/30 tw-backdrop-blur-md tw-z-50 tw-transform tw-transition-all tw-duration-300 tw-origin-top-right tw-overflow-hidden">
          <div class="tw-px-6 tw-py-5 tw-bg-gradient-to-br tw-from-amber-400/10 tw-via-yellow-400/5 tw-to-amber-500/10 tw-border-b tw-border-amber-400/20">
            <div class="tw-flex tw-items-center tw-space-x-4">
              <div class="tw-relative">
                <div
                  class="tw-w-10 tw-h-10 tw-bg-gradient-to-br tw-from-amber-400 tw-to-yellow-500 tw-rounded-2xl tw-flex tw-items-center tw-justify-center tw-shadow-lg tw-ring-2 tw-ring-amber-300/50">
                  <img [src]="
                      admin.profilePic
                        ? getImageUrl(admin.profilePic || '')
                        : 'https://ui-avatars.com/api/?name=' +
                          admin.name +
                          '&background=F59E0B&color=1E1B4B&bold=true'
                    " [alt]="admin.name"
                    class="tw-h-10 tw-w-10 tw-rounded-2xl tw-object-cover tw-border-2 tw-border-amber-200" />
                </div>
                <div
                  class="tw-absolute -tw-bottom-1 -tw-right-1 tw-w-5 tw-h-5 tw-bg-gradient-to-r tw-from-green-400 tw-to-green-500 tw-rounded-full tw-border-2 tw-border-indigo-950 tw-shadow-sm">
                </div>
              </div>
              <div class="tw-flex-1">
                <p class="tw-text-[15px] tw-font-bold tw-text-amber-100 tw-leading-tight tw-mb-1">
                  {{ admin.name | titlecase }}
                </p>
                <p class="tw-text-[13px] tw-text-amber-200/70 tw-font-medium tw-mb-1">
                  {{ admin.email }}
                </p>
              </div>
            </div>
          </div>

          <!-- Menu Items with enhanced styling -->
          <div class="tw-py-2">
            <a routerLink="settings/user-profile" routerLinkActive="active-link"
              [routerLinkActiveOptions]="{ exact: true }" (click)="toggleProfileDropdown($event); $event.stopPropagation()"
              class="tw-flex tw-items-center tw-no-underline tw-px-6 tw-py-3 tw-text-sm tw-text-amber-100 hover:tw-bg-amber-400/10 tw-transition-all tw-duration-200 tw-group tw-relative tw-overflow-hidden hover:tw-transform hover:tw-translate-x-1">
              <div
                class="tw-absolute tw-left-0 tw-top-0 tw-h-full tw-w-1 tw-bg-gradient-to-b tw-from-amber-400 tw-to-yellow-500 tw-transform tw-scale-y-0 group-hover:tw-scale-y-100 tw-transition-transform tw-duration-200 tw-origin-center">
              </div>
              <div
                class="tw-w-10 tw-h-10 tw-flex tw-items-center tw-justify-center tw-mr-4 tw-rounded-lg group-hover:tw-bg-amber-400/20 tw-transition-colors tw-duration-200 tw-transform group-hover:tw-scale-110">
                <i class="ph ph-user tw-text-amber-300 tw-text-lg group-hover:tw-text-amber-200"></i>
              </div>
              <div>
                <span class="tw-font-semibold tw-block">Your Profile</span>
                <span class="tw-text-xs tw-text-amber-200/60">Manage your account</span>
              </div>
              <i
                class="ph-arrow-right tw-ml-auto tw-text-amber-300 tw-transform tw-scale-0 group-hover:tw-scale-100 tw-transition-transform tw-duration-200"></i>
            </a>

            <a routerLink="settings/change-password" routerLinkActive="active-link"
              [routerLinkActiveOptions]="{ exact: true }" (click)="toggleProfileDropdown($event); $event.stopPropagation()"
              class="tw-flex tw-items-center tw-no-underline tw-px-6 tw-py-3 tw-text-sm tw-text-amber-100 hover:tw-bg-amber-400/10 tw-transition-all tw-duration-200 tw-group tw-relative tw-overflow-hidden hover:tw-transform hover:tw-translate-x-1">
              <div
                class="tw-absolute tw-left-0 tw-top-0 tw-h-full tw-w-1 tw-bg-gradient-to-b tw-from-yellow-400 tw-to-amber-500 tw-transform tw-scale-y-0 group-hover:tw-scale-y-100 tw-transition-transform tw-duration-200 tw-origin-center">
              </div>
              <div
                class="tw-w-10 tw-h-10 tw-flex tw-items-center tw-justify-center tw-mr-4 tw-rounded-lg group-hover:tw-bg-amber-400/20 tw-transition-colors tw-duration-200 tw-transform group-hover:tw-scale-110">
                <i class="ph ph-lock tw-text-amber-300 tw-text-lg group-hover:tw-text-amber-200"></i>
              </div>
              <div>
                <span class="tw-font-semibold tw-block">Change Password</span>
                <span class="tw-text-xs tw-text-amber-200/60">Update your password</span>
              </div>
              <i
                class="ph-arrow-right tw-ml-auto tw-text-amber-300 tw-transform tw-scale-0 group-hover:tw-scale-100 tw-transition-transform tw-duration-200"></i>
            </a>
          </div>

          <!-- Divider with gradient -->
          <div class="tw-mx-6 tw-h-px tw-bg-gradient-to-r tw-from-transparent tw-via-amber-400/30 tw-to-transparent"></div>

          <!-- Enhanced Logout Button -->
          <div class="tw-py-2">
            <a (click)="_logoutUser(); toggleProfileDropdown($event); $event.stopPropagation()"
              class="tw-flex tw-items-center tw-no-underline tw-px-6 tw-py-3 tw-text-sm tw-text-red-400 hover:tw-bg-red-900/20 hover:tw-text-red-300 tw-transition-all tw-duration-200 tw-group tw-cursor-pointer tw-relative tw-overflow-hidden hover:tw-transform hover:tw-translate-x-1">
              <div
                class="tw-absolute tw-left-0 tw-top-0 tw-h-full tw-w-1 tw-bg-gradient-to-b tw-from-red-500 tw-to-red-600 tw-transform tw-scale-y-0 group-hover:tw-scale-y-100 tw-transition-transform tw-duration-200 tw-origin-center">
              </div>
              <div
                class="tw-w-10 tw-h-10 tw-flex tw-items-center tw-justify-center tw-mr-4 tw-rounded-lg group-hover:tw-bg-red-900/30 tw-transition-colors tw-duration-200 tw-transform group-hover:tw-scale-110">
                <i class="ph ph-sign-out tw-text-red-400 tw-text-lg"></i>
              </div>
              <div>
                <span class="tw-font-semibold tw-block">Sign Out</span>
                <span class="tw-text-xs tw-text-red-400/70">End your session</span>
              </div>
              <i
                class="ph-arrow-right tw-ml-auto tw-text-red-400 tw-transform tw-scale-0 group-hover:tw-scale-100 tw-transition-transform tw-duration-200"></i>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>