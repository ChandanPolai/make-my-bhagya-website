<main
  [class]="
    'tw-pt-4 tw-pb-4 tw-transition-all tw-duration-300 tw-overflow-auto tw-relative tw-min-h-screen ' +
    (isSidebarCollapsed ? ' tw-ml-16' : ' tw-ml-64')
  "
>
  <!-- Background Watermark - LEFT SIDE -->
  <div class="settings-watermark">
    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSUrakRDANbeWZlbwBE33hFLh_S6zj-4cOkzQ&s" alt="">
  </div>

  <div class="tw-flex tw-items-center tw-justify-center tw-p-4 tw-min-h-[80vh] tw-relative tw-z-10 tw-bg-gradient-to-br tw-from-gray-50 tw-via-amber-50/20 tw-to-purple-50/10">
    <div class="tw-w-full tw-max-w-2xl">
      <div
        class="tw-rounded-2xl tw-backdrop-blur-sm tw-border-2 tw-border-amber-200 tw-overflow-hidden tw-transform tw-transition-all tw-duration-300 tw-shadow-2xl tw-shadow-purple-200/50 tw-bg-white"
      >
        <div
          class="tw-px-8 tw-pt-8 tw-pb-1 tw-text-left tw-border-b-2 tw-border-amber-200 tw-bg-gradient-to-r tw-from-indigo-900 tw-via-purple-800 tw-to-indigo-900"
        >
          <h2 class="tw-text-2xl tw-font-bold tw-text-amber-100 tw-mb-2">
            Change Password
          </h2>
          <p class="tw-text-amber-200 tw-text-sm tw-font-medium">
            Update your password to keep your account secure
          </p>
        </div>

        <!-- Security Icon Section -->
        <div class="tw-flex tw-justify-center tw-pt-8">
          <div class="tw-relative">
            <div
              class="tw-w-28 tw-h-28 tw-rounded-full tw-flex tw-items-center tw-justify-center tw-border-4 tw-border-amber-300 tw-shadow-2xl tw-shadow-amber-200/50 tw-bg-gradient-to-br tw-from-amber-500 tw-to-yellow-500"
            >
              <i class="ph ph-shield-check tw-text-indigo-950 tw-text-5xl"></i>
            </div>
          </div>
        </div>
        
        <div class="tw-text-center tw-mt-2 tw-pb-4">
          <p class="tw-text-sm tw-text-indigo-900 tw-font-bold">
            Secure Password Update
          </p>
        </div>

        <div class="tw-px-8 tw-pb-8 tw-pt-8">
          <!-- Loading Indicator -->
          <div *ngIf="isLoading" class="tw-flex tw-justify-center tw-items-center tw-py-8">
            <div class="tw-animate-spin tw-rounded-full tw-h-8 tw-w-8 tw-border-4 tw-border-amber-400 tw-border-t-transparent"></div>
            <span class="tw-ml-2 tw-text-gray-700 tw-font-semibold">Updating password...</span>
          </div>

          <form
            *ngIf="!isLoading"
            class="tw-space-y-6"
            (ngSubmit)="onSubmit()"
            [formGroup]="changePasswordForm"
          >
            <!-- Current Password -->
            <div class="tw-space-y-2">
              <label
                class="tw-text-[17px] tw-font-bold tw-text-indigo-900 tw-block"
              >
                Current Password
              </label>
              <div class="tw-relative">
                <div
                  class="tw-absolute tw-inset-y-0 tw-pl-3 tw-flex tw-pointer-events-none"
                >
                  <i
                    class="ph ph-lock tw-text-amber-600 tw-text-lg tw-pt-2"
                  ></i>
                </div>
                <input
                  [type]="showCurrentPassword ? 'text' : 'password'"
                  placeholder="Enter your current password"
                  formControlName="currentPassword"
                  class="tw-w-full tw-pl-10 tw-pr-12 tw-py-2 tw-border-2 tw-border-amber-300 tw-rounded-xl tw-text-sm tw-transition-all tw-duration-200 focus:tw-border-amber-400 focus:tw-ring-2 focus:tw-ring-amber-400 tw-bg-white tw-shadow-md"
                />
                <button
                  type="button"
                  (click)="togglePasswordVisibility('current')"
                  class="tw-absolute tw-inset-y-0 tw-right-0 tw-pr-3 tw-flex tw-items-center tw-text-amber-600 hover:tw-text-amber-700 tw-transition-colors tw-duration-200"
                >
                  <i
                    [class]="
                      showCurrentPassword ? 'ph ph-eye-slash' : 'ph ph-eye'
                    "
                  ></i>
                </button>
              </div>
              <div *ngIf="changePasswordForm.get('currentPassword')?.invalid && changePasswordForm.get('currentPassword')?.touched" class="tw-text-red-600 tw-text-xs tw-mt-1 tw-font-semibold">
                {{ getFieldError('currentPassword') }}
              </div>
            </div>

            <!-- New Password -->
            <div class="tw-space-y-2">
              <label
                class="tw-text-[17px] tw-font-bold tw-text-indigo-900 tw-block"
              >
                New Password
              </label>
              <div class="tw-relative">
                <div
                  class="tw-absolute tw-inset-y-0 tw-pl-3 tw-flex tw-pointer-events-none"
                >
                  <i
                    class="ph ph-key tw-text-amber-600 tw-text-lg tw-pt-2"
                  ></i>
                </div>
                <input
                  [type]="showNewPassword ? 'text' : 'password'"
                  placeholder="Enter your new password"
                  formControlName="newPassword"
                  class="tw-w-full tw-pl-10 tw-pr-12 tw-py-2 tw-border-2 tw-border-amber-300 tw-rounded-xl tw-text-sm tw-transition-all tw-duration-200 focus:tw-border-amber-400 focus:tw-ring-2 focus:tw-ring-amber-400 tw-bg-white tw-shadow-md"
                />
                <button
                  type="button"
                  (click)="togglePasswordVisibility('new')"
                  class="tw-absolute tw-inset-y-0 tw-right-0 tw-pr-3 tw-flex tw-items-center tw-text-amber-600 hover:tw-text-amber-700 tw-transition-colors tw-duration-200"
                >
                  <i
                    [class]="showNewPassword ? 'ph ph-eye-slash' : 'ph ph-eye'"
                  ></i>
                </button>
              </div>
              <div *ngIf="changePasswordForm.get('newPassword')?.invalid && changePasswordForm.get('newPassword')?.touched" class="tw-text-red-600 tw-text-xs tw-mt-1 tw-font-semibold">
                {{ getFieldError('newPassword') }}
              </div>
            </div>

            <!-- Confirm New Password -->
            <div class="tw-space-y-2">
              <label
                class="tw-text-[17px] tw-font-bold tw-text-indigo-900 tw-block"
              >
                Confirm New Password
              </label>
              <div class="tw-relative">
                <div
                  class="tw-absolute tw-inset-y-0 tw-pl-3 tw-flex tw-pointer-events-none"
                >
                  <i
                    class="ph ph-shield-check tw-text-amber-600 tw-text-lg tw-pt-2"
                  ></i>
                </div>
                <input
                  [type]="showConfirmPassword ? 'text' : 'password'"
                  placeholder="Confirm your new password"
                  formControlName="confirmPassword"
                  class="tw-w-full tw-pl-10 tw-pr-12 tw-py-2 tw-border-2 tw-border-amber-300 tw-rounded-xl tw-text-sm tw-transition-all tw-duration-200 focus:tw-border-amber-400 focus:tw-ring-2 focus:tw-ring-amber-400 tw-bg-white tw-shadow-md"
                />
                <button
                  type="button"
                  (click)="togglePasswordVisibility('confirm')"
                  class="tw-absolute tw-inset-y-0 tw-right-0 tw-pr-3 tw-flex tw-items-center tw-text-amber-600 hover:tw-text-amber-700 tw-transition-colors tw-duration-200"
                >
                  <i
                    [class]="
                      showConfirmPassword ? 'ph ph-eye-slash' : 'ph ph-eye'
                    "
                  ></i>
                </button>
              </div>
              <div *ngIf="changePasswordForm.get('confirmPassword')?.invalid && changePasswordForm.get('confirmPassword')?.touched" class="tw-text-red-600 tw-text-xs tw-mt-1 tw-font-semibold">
                {{ getFieldError('confirmPassword') }}
              </div>
            </div>

            <!-- Action Buttons -->
            <div class="tw-pt-4 tw-flex tw-gap-4">
              <button
                type="submit"
                [disabled]="changePasswordForm.invalid || isLoading"
                class="tw-flex-1 tw-bg-gradient-to-r tw-from-amber-500 tw-to-yellow-500 hover:tw-from-amber-600 hover:tw-to-yellow-600 disabled:tw-from-gray-300 disabled:tw-to-gray-400 tw-text-indigo-950 tw-font-bold tw-px-6 tw-py-3 tw-rounded-xl tw-flex tw-items-center tw-justify-center tw-gap-2 tw-transition-all tw-duration-200 tw-shadow-lg hover:tw-shadow-xl disabled:tw-opacity-50 disabled:tw-cursor-not-allowed"
              >
                <i class="ph ph-floppy-disk tw-text-xl"></i>
                Update Password
              </button>

              <button
                type="button"
                (click)="onClear()"
                class="tw-flex-1 tw-bg-gradient-to-r tw-from-gray-600 tw-to-gray-700 hover:tw-from-gray-700 hover:tw-to-gray-800 tw-text-white tw-font-bold tw-px-6 tw-py-3 tw-rounded-xl tw-flex tw-items-center tw-justify-center tw-gap-2 tw-transition-all tw-duration-200 tw-shadow-lg hover:tw-shadow-xl"
              >
                <i class="ph ph-arrows-clockwise tw-text-xl"></i>
                Reset Form
              </button>
            </div>

            <!-- Gradient Line -->
            <div
              class="tw-h-1 tw-bg-gradient-to-r tw-from-amber-500 tw-via-yellow-500 tw-to-amber-500 tw-rounded-full tw-mt-6"
            ></div>

            <!-- Footer -->
            <div class="tw-text-center tw-mt-6">
              <p class="tw-text-sm tw-text-gray-600">
                Need help?
                <a href="#" class="tw-font-bold tw-text-amber-600 hover:tw-text-amber-700 tw-transition-colors">
                  Contact Support
                </a>
              </p>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</main>